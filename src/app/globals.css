@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base Styles */
@layer base {
  * {
    @apply box-border;
  }

  html {
    @apply scroll-smooth;
    scroll-behavior: smooth;
    /* Prevent layout shift on high DPI/scaled displays */
    text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust: 100%;
  }

  body {
    @apply bg-midnight text-white font-body antialiased;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Prevent overflow on scaled displays */
    overflow-x: hidden;
    min-height: 100vh;
    min-height: 100dvh; /* Dynamic viewport height for mobile */
  }

  /* Fix for 125%+ display scaling */
  @media (-webkit-min-device-pixel-ratio: 1.25), (min-resolution: 120dpi) {
    html {
      font-size: clamp(14px, 1vw + 0.5rem, 16px);
    }
    
    img, video {
      image-rendering: -webkit-optimize-contrast;
      image-rendering: crisp-edges;
    }
  }

  ::selection {
    @apply bg-gold/30 text-white;
  }

  /* Custom Scrollbar */
  ::-webkit-scrollbar {
    @apply w-2;
  }

  ::-webkit-scrollbar-track {
    @apply bg-midnight-50;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-gold/50 rounded-full hover:bg-gold/70 transition-colors;
  }

  /* Focus States */
  *:focus-visible {
    @apply outline-none ring-2 ring-gold ring-offset-2 ring-offset-midnight;
  }

  /* Reduced Motion Support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    html {
      scroll-behavior: auto;
    }

    /* Disable parallax and scroll-based effects */
    .parallax,
    [data-parallax] {
      transform: none !important;
    }
  }
}

@layer components {
  /* Gold Text Gradient */
  .text-gradient-gold {
    @apply bg-gradient-gold bg-clip-text text-transparent;
  }

  /* Gold Underline Effect */
  .gold-underline {
    @apply relative;
  }

  .gold-underline::after {
    content: '';
    @apply absolute bottom-0 left-0 w-0 h-0.5 bg-gold transition-all duration-500;
  }

  .gold-underline:hover::after {
    @apply w-full;
  }

  /* Section Styling */
  .section-padding {
    @apply py-20 md:py-28 lg:py-36;
  }

  /* Glass Effect */
  .glass {
    @apply bg-midnight-50/80 backdrop-blur-md border border-white/5;
  }

  /* Card Hover Effect */
  .card-hover {
    @apply transition-all duration-500 hover:transform hover:-translate-y-2 hover:shadow-2xl hover:shadow-gold/10;
  }

  /* Button Base */
  .btn {
    @apply inline-flex items-center justify-center gap-2 font-body font-medium 
           transition-all duration-300 ease-smooth 
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply btn bg-gold text-midnight px-8 py-4 
           hover:bg-gold-light hover:shadow-lg hover:shadow-gold/30
           active:scale-95;
  }

  .btn-secondary {
    @apply btn bg-transparent border-2 border-gold text-gold px-8 py-4
           hover:bg-gold hover:text-midnight
           active:scale-95;
  }

  .btn-ghost {
    @apply btn text-gold hover:bg-gold/10 px-4 py-2;
  }

  /* Navigation Link */
  .nav-link {
    @apply relative text-white/80 hover:text-gold transition-colors duration-300
           after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 
           after:bg-gold after:transition-all after:duration-300
           hover:after:w-full;
  }

  /* Heading Styles */
  .heading-xl {
    @apply font-heading text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-light tracking-tight;
  }

  .heading-lg {
    @apply font-heading text-4xl md:text-5xl lg:text-6xl font-light tracking-tight;
  }

  .heading-md {
    @apply font-heading text-3xl md:text-4xl lg:text-5xl font-light tracking-tight;
  }

  .heading-sm {
    @apply font-heading text-2xl md:text-3xl font-light tracking-tight;
  }

  /* Body Text */
  .body-lg {
    @apply font-body text-lg md:text-xl leading-relaxed text-white/80;
  }

  .body-md {
    @apply font-body text-base md:text-lg leading-relaxed text-white/70;
  }

  /* Decorative Elements */
  .gold-line {
    @apply w-16 h-0.5 bg-gold;
  }

  .gold-dot {
    @apply w-2 h-2 rounded-full bg-gold;
  }
}

@layer utilities {
  /* Aspect Ratios */
  .aspect-portrait {
    aspect-ratio: 3 / 4;
  }

  .aspect-cinema {
    aspect-ratio: 21 / 9;
  }

  /* Text Balance */
  .text-balance {
    text-wrap: balance;
  }

  /* Smooth Transforms */
  .will-change-transform {
    will-change: transform;
  }

  /* Mask Gradient */
  .mask-gradient {
    mask-image: linear-gradient(to bottom, black 0%, transparent 100%);
    -webkit-mask-image: linear-gradient(to bottom, black 0%, transparent 100%);
  }

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}

/* ─────────────────────────────────────────────────────────────────────────────
   Milonga Mode Styles
   Special ambient mode for a tango dance hall atmosphere
   ───────────────────────────────────────────────────────────────────────────── */

:root {
  --milonga-glow: 0;
}

.milonga-mode {
  /* Warm, intimate color palette */
  --milonga-gold: 255, 180, 100;
  --milonga-rose: 255, 100, 120;
  --milonga-ambient: 40, 20, 25;
}

.milonga-mode .text-gold {
  color: rgb(255, 180, 100);
  text-shadow: 0 0 10px rgba(255, 180, 100, 0.5);
}

.milonga-mode .bg-gold {
  background-color: rgb(255, 180, 100);
  box-shadow: 0 0 20px rgba(255, 180, 100, 0.3);
}

.milonga-mode .border-gold {
  border-color: rgb(255, 180, 100);
  box-shadow: 0 0 10px rgba(255, 180, 100, 0.2);
}

.milonga-mode .bg-midnight {
  background-color: rgb(20, 12, 15);
}

.milonga-mode .bg-charcoal {
  background-color: rgb(35, 20, 25);
}

/* Subtle warm glow on images */
.milonga-mode img {
  filter: sepia(0.1) saturate(1.1);
}

/* Pulsing glow animation for interactive elements */
.milonga-mode .btn-primary,
.milonga-mode .btn-secondary {
  animation: milonga-pulse 3s ease-in-out infinite;
}

@keyframes milonga-pulse {
  0%, 100% {
    box-shadow: 0 0 10px rgba(255, 180, 100, 0.3);
  }
  50% {
    box-shadow: 0 0 25px rgba(255, 180, 100, 0.5);
  }
}

